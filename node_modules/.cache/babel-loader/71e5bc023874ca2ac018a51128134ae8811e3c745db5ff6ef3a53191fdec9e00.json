{"ast":null,"code":"var _jsxFileName = \"/home/guddy/code/project/client/src/components/auth/ProtectedRoute.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport LoadingSpinner from '../common/LoadingSpinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  requireAuth = true,\n  redirectTo = '/login'\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    loading,\n    user\n  } = useAuth();\n  const location = useLocation();\n\n  // Show loading spinner while checking authentication\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      fullHeight: true,\n      text: \"Checking authentication...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 12,\n      columnNumber: 12\n    }, this);\n  }\n\n  // If authentication is required but user is not authenticated\n  if (requireAuth && !isAuthenticated) {\n    // Redirect to login page with return URL\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: redirectTo,\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 7\n    }, this);\n  }\n\n  // If user is authenticated but trying to access auth pages (login/signup)\n  if (!requireAuth && isAuthenticated) {\n    var _location$state, _location$state$from;\n    // Redirect to dashboard or intended page\n    const from = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || '/dashboard';\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: from,\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 12\n    }, this);\n  }\n\n  // If user has required permissions, render the protected component\n  return children;\n};\n\n// Higher-order component version\n_s(ProtectedRoute, \"8g2tU52LwEab8Kaz1t6uSQodu7U=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nexport const withAuth = (Component, options = {}) => {\n  return function AuthenticatedComponent(props) {\n    return /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n      ...options,\n      children: /*#__PURE__*/_jsxDEV(Component, {\n        ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this);\n  };\n};\n\n// Role-based protection\nexport const RoleProtectedRoute = ({\n  children,\n  requiredRoles = [],\n  fallback = null,\n  redirectTo = '/unauthorized'\n}) => {\n  _s2();\n  const {\n    isAuthenticated,\n    loading,\n    user\n  } = useAuth();\n  const location = useLocation();\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      fullHeight: true,\n      text: \"Checking permissions...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Check if user has required roles\n  const userRoles = (user === null || user === void 0 ? void 0 : user.roles) || [];\n  const hasRequiredRole = requiredRoles.length === 0 || requiredRoles.some(role => userRoles.includes(role));\n  if (!hasRequiredRole) {\n    if (fallback) {\n      return fallback;\n    }\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: redirectTo,\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n\n// Permission-based protection\n_s2(RoleProtectedRoute, \"8g2tU52LwEab8Kaz1t6uSQodu7U=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c2 = RoleProtectedRoute;\nexport const PermissionProtectedRoute = ({\n  children,\n  requiredPermissions = [],\n  fallback = null,\n  redirectTo = '/unauthorized'\n}) => {\n  _s3();\n  const {\n    isAuthenticated,\n    loading,\n    user\n  } = useAuth();\n  const location = useLocation();\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n      fullHeight: true,\n      text: \"Checking permissions...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 12\n    }, this);\n  }\n  if (!isAuthenticated) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Check if user has required permissions\n  const userPermissions = (user === null || user === void 0 ? void 0 : user.permissions) || [];\n  const hasRequiredPermissions = requiredPermissions.length === 0 || requiredPermissions.every(permission => userPermissions.includes(permission));\n  if (!hasRequiredPermissions) {\n    if (fallback) {\n      return fallback;\n    }\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: redirectTo,\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 12\n    }, this);\n  }\n  return children;\n};\n_s3(PermissionProtectedRoute, \"8g2tU52LwEab8Kaz1t6uSQodu7U=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c3 = PermissionProtectedRoute;\nexport default ProtectedRoute;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"ProtectedRoute\");\n$RefreshReg$(_c2, \"RoleProtectedRoute\");\n$RefreshReg$(_c3, \"PermissionProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","LoadingSpinner","jsxDEV","_jsxDEV","ProtectedRoute","children","requireAuth","redirectTo","_s","isAuthenticated","loading","user","location","fullHeight","text","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","_location$state","_location$state$from","pathname","_c","withAuth","Component","options","AuthenticatedComponent","props","RoleProtectedRoute","requiredRoles","fallback","_s2","userRoles","roles","hasRequiredRole","length","some","role","includes","_c2","PermissionProtectedRoute","requiredPermissions","_s3","userPermissions","permissions","hasRequiredPermissions","every","permission","_c3","$RefreshReg$"],"sources":["/home/guddy/code/project/client/src/components/auth/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../../contexts/AuthContext';\nimport LoadingSpinner from '../common/LoadingSpinner';\n\nconst ProtectedRoute = ({ children, requireAuth = true, redirectTo = '/login' }) => {\n  const { isAuthenticated, loading, user } = useAuth();\n  const location = useLocation();\n\n  // Show loading spinner while checking authentication\n  if (loading) {\n    return <LoadingSpinner fullHeight text=\"Checking authentication...\" />;\n  }\n\n  // If authentication is required but user is not authenticated\n  if (requireAuth && !isAuthenticated) {\n    // Redirect to login page with return URL\n    return (\n      <Navigate\n        to={redirectTo}\n        state={{ from: location }}\n        replace\n      />\n    );\n  }\n\n  // If user is authenticated but trying to access auth pages (login/signup)\n  if (!requireAuth && isAuthenticated) {\n    // Redirect to dashboard or intended page\n    const from = location.state?.from?.pathname || '/dashboard';\n    return <Navigate to={from} replace />;\n  }\n\n  // If user has required permissions, render the protected component\n  return children;\n};\n\n// Higher-order component version\nexport const withAuth = (Component, options = {}) => {\n  return function AuthenticatedComponent(props) {\n    return (\n      <ProtectedRoute {...options}>\n        <Component {...props} />\n      </ProtectedRoute>\n    );\n  };\n};\n\n// Role-based protection\nexport const RoleProtectedRoute = ({\n  children,\n  requiredRoles = [],\n  fallback = null,\n  redirectTo = '/unauthorized'\n}) => {\n  const { isAuthenticated, loading, user } = useAuth();\n  const location = useLocation();\n\n  if (loading) {\n    return <LoadingSpinner fullHeight text=\"Checking permissions...\" />;\n  }\n\n  if (!isAuthenticated) {\n    return (\n      <Navigate\n        to=\"/login\"\n        state={{ from: location }}\n        replace\n      />\n    );\n  }\n\n  // Check if user has required roles\n  const userRoles = user?.roles || [];\n  const hasRequiredRole = requiredRoles.length === 0 ||\n    requiredRoles.some(role => userRoles.includes(role));\n\n  if (!hasRequiredRole) {\n    if (fallback) {\n      return fallback;\n    }\n    return <Navigate to={redirectTo} replace />;\n  }\n\n  return children;\n};\n\n// Permission-based protection\nexport const PermissionProtectedRoute = ({\n  children,\n  requiredPermissions = [],\n  fallback = null,\n  redirectTo = '/unauthorized'\n}) => {\n  const { isAuthenticated, loading, user } = useAuth();\n  const location = useLocation();\n\n  if (loading) {\n    return <LoadingSpinner fullHeight text=\"Checking permissions...\" />;\n  }\n\n  if (!isAuthenticated) {\n    return (\n      <Navigate\n        to=\"/login\"\n        state={{ from: location }}\n        replace\n      />\n    );\n  }\n\n  // Check if user has required permissions\n  const userPermissions = user?.permissions || [];\n  const hasRequiredPermissions = requiredPermissions.length === 0 ||\n    requiredPermissions.every(permission => userPermissions.includes(permission));\n\n  if (!hasRequiredPermissions) {\n    if (fallback) {\n      return fallback;\n    }\n    return <Navigate to={redirectTo} replace />;\n  }\n\n  return children;\n};\n\nexport default ProtectedRoute;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}